<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7セグメントディスプレイ論理回路設計ツール</title>

    <!-- MathJax CDN (非 async で安定読み込み) -->
    <script id="MathJax-script"
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>

    <style>
        body { font-family: sans-serif; margin: 20px; background: #f0f0ff; }
        .container { background: white; padding: 20px; border-radius: 10px; }
        .karnaugh-map { margin-bottom: 30px; }
        .karnaugh-title { font-weight: bold; margin-bottom: 5px; }
        .k-map-table { border-collapse: collapse; margin: auto; }
        .k-map-table td { border: 1px solid #333; width: 50px; height: 50px; text-align: center; font-size: 16px; }
    </style>
</head>
<body>
<div class="container">
    <h1>カルノー図簡易表示ツール</h1>
    <div id="karnaughMaps"></div>
</div>

<script>
const segmentPatterns = {
    'A': [1,1,1,0,1,1,1], 'B': [0,0,1,1,1,1,1], 'C': [0,0,0,1,1,0,1],
    'D': [0,1,1,1,1,0,1], 'E': [1,0,0,1,1,1,1], 'F': [1,0,0,0,1,1,1],
    'G': [1,0,1,1,1,1,0], 'H': [0,0,1,0,1,1,1]
};

function generateKarnaughMaps() {
    const chars = ['K','O','G','A','K','U','I','N'];
    const segName = 'Za';
    const segIndex = 0;
    const container = document.getElementById('karnaughMaps');
    const mapDiv = document.createElement('div');
    mapDiv.className = 'karnaugh-map';

    const title = document.createElement('div');
    title.className = 'karnaugh-title';
    title.innerHTML = "\\( " + segName + " \)">
    mapDiv.appendChild(title);

    const table = document.createElement('table');
    table.className = 'k-map-table';
    const values = chars.map(char => segmentPatterns[char] ? segmentPatterns[char][segIndex] : 0);
    const karnaughValues = [values[0], values[1], values[3], values[2], values[4], values[5], values[7], values[6]];
    table.innerHTML = `
        <tr>
            <td>\\( \overline{C} \)</td><td>\\( C \)</td><td>\\( C \)</td><td>\\( \overline{C} \)</td>
        </tr>
        <tr>
            <td>${karnaughValues[0]}</td><td>${karnaughValues[1]}</td><td>${karnaughValues[2]}</td><td>${karnaughValues[3]}</td>
        </tr>
        <tr>
            <td>${karnaughValues[4]}</td><td>${karnaughValues[5]}</td><td>${karnaughValues[6]}</td><td>${karnaughValues[7]}</td>
        </tr>`;

    mapDiv.appendChild(table);
    container.appendChild(mapDiv);

    if (window.MathJax) {
        MathJax.typesetPromise([container]);
    }
}

window.onload = generateKarnaughMaps;
</script>
</body>
</html>
